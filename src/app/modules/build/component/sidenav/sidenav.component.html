
<input autocomplete="false" name="hidden" type="text" style="display:none;">
<div class="sidenav">
    <div class="import">
        <h3>Import</h3>
        <input type="file" (change)="uploadSave($event, fileInput)" #fileInput>
        <button mat-flat-button color="primary" (click)="fileInput.click()"><mat-icon>file_upload</mat-icon>From file</button>
        <mat-form-field appearance="outline" color="primary" floatLabel="never">
            <mat-label>Import content...</mat-label>
            <textarea matInput [formControl]="importContent" [disabled]="busy"></textarea>
            <mat-hint align="end" *ngIf="importResult === null">Paste here a build, layer, link or save data</mat-hint>
            <mat-hint align="end" class="success" *ngIf="importResult !== null && importResult.character !== null">Compatible character found</mat-hint>
            <mat-hint align="end" class="success" *ngIf="importResult !== null && importResult.layer !== null">Compatible layer found</mat-hint>
            <mat-hint align="end" class="success" *ngIf="importResult !== null && importResult.planner !== null">Build found</mat-hint>
            <mat-hint align="end" class="error" *ngIf="importResult !== null && importResult.character === null && importResult.layer === null && importResult.planner === null">No compatible data found</mat-hint>
            <mat-error>Cannot parse files bigger than {{MAX_UPLOAD_FILE_SIZE_MO}}Mo</mat-error>
        </mat-form-field>
        <button mat-flat-button color="primary" (click)="import()" [disabled]="!hasValidImport()">Import into current build</button>
    </div>
    <hr/>
    <div class="export">
        <h3>Export</h3>
        <div class="export-details">
            <p>Current layer</p>
            <div class="actions">
                <button mat-icon-button (click)="!busy && downloadLayer()" matTooltip="Download"><mat-icon>file_download</mat-icon></button>
                <button mat-icon-button (click)="!busy && copyLayer()" matTooltip="Copy to clipboard"><mat-icon>content_copy</mat-icon></button>
                <button mat-icon-button (click)="!busy && copyExternalLink()" matTooltip="External link (using paste.ee)">
                    <mat-icon *ngIf="!generatingLink">share</mat-icon>
                    <mat-icon *ngIf="generatingLink" class="animation-rotation">sync</mat-icon>
                </button>
                
            </div>
        </div>
        <div class="export-details">
            <p>Current build</p>
            <div class="actions">
                <button mat-icon-button (click)="!busy && downloadPlanner()" matTooltip="Download"><mat-icon>file_download</mat-icon></button>
                <button mat-icon-button (click)="!busy && copyPlanner()" matTooltip="Copy to clipboard"><mat-icon>content_copy</mat-icon></button>
            </div>
        </div>
    </div>
    <hr/>
    <div class="build">
        <button mat-flat-button color="primary" (click)="createNewBuild()">New build</button>
    </div>
</div>
